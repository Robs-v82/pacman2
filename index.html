<!DOCTYPE html>
<html>
<head>
	<title>PacMan</title>
	<link rel="stylesheet" type="text/css" href="style.css">
	<script type="text/javascript" src="jquery.js"></script>
</head>
<body>
	<div id="world">
		
		
			
	</div>
	<div id="player">
		<p>Points: </p><p id="score">000</p>
	</div>
	<script type="text/javascript">
		var position = { x: 4, y:4 };
		var pacMan = { x: 4, y:4 };
		var map = 	[
						[0,0,0,0,0,0,0,0,0,0],
						[0,1,1,0,1,1,1,1,1,0],
						[0,0,1,0,0,0,1,0,0,0],
						[0,1,1,1,1,1,1,1,1,0],
						[0,1,0,0,3,1,1,1,1,0],
						[0,1,1,1,1,1,0,1,1,0],
						[0,1,1,0,1,1,0,1,1,0],
						[0,1,1,0,0,0,0,1,1,0],
						[0,1,1,1,1,1,1,1,1,0],
						[0,0,0,0,0,0,0,0,0,0]
					];
		
		function drawWorld(){
			$("#world").html("");
			for(var y = 0; y < map.length; y++){
				// console.log(map[y]);
				for(var x = 0; x < map[y].length; x++){
					// console.log(map[y][x]);
					if(map[y][x]===0){ // WALL
						$("#world").append("<img class='wall' src='img/wall.png'>")
					} else if (map[y][x] === 1){ // COIN
						$("#world").append("<div class='ground'><div class='coin'></div></div>");
					} else if (map[y][x] === 2){ // GROUND
						$("#world").append("<div class='ground'></div>");
					} else if (map[y][x] === 3) {
						$("#world").append("<img class='pacman' src='img/pacman.png'>");
					}
				}
			}
		}
		drawWorld();
		var pointCount = 000
		
		function addPoints() {
			pointCount = pointCount + 100;
			$("#score").text(pointCount);
			 	
		} 

		$(document).on("keydown", "html", function(e){
			
			var newPosition = map[pacMan.y][pacMan.x];
			

			if (e.keyCode === 37){ // Left
				newPosition = map[pacMan.y][pacMan.x-1];
			}
			else if (e.keyCode === 39){ // Left
				newPosition = map[pacMan.y][pacMan.x+1];
			}
			else if (e.keyCode === 38){ // Left
				newPosition = map[pacMan.y-1][pacMan.x];
			}
			else if (e.keyCode === 40){ // Left
				newPosition = map[pacMan.y+1][pacMan.x];
			}

			if (newPosition===1) {
				addPoints();
			}

			if (newPosition !=0) {
				if (e.keyCode === 37){ // Left
					map[pacMan.y][pacMan.x] = 2;
					pacMan.x = pacMan.x -1; 
					map[pacMan.y][pacMan.x] = 3;
					drawWorld();
					$("img.pacman").attr("src","img/pacman_left.png")
				} 
				else if (e.keyCode === 39){ // Right
					map[pacMan.y][pacMan.x] = 2;
					pacMan.x = pacMan.x +1; 
					map[pacMan.y][pacMan.x] = 3;
					drawWorld();
					
				}
				else if (e.keyCode === 38){ // Up
					map[pacMan.y][pacMan.x] = 2;
					pacMan.y = pacMan.y -1; 
					map[pacMan.y][pacMan.x] = 3;
					drawWorld();
					$("img.pacman").attr("src","img/pacman_up.png")
				}			
				else if (e.keyCode === 40){ // Down
					map[pacMan.y][pacMan.x] = 2;
					pacMan.y = pacMan.y +1; 
					map[pacMan.y][pacMan.x] = 3;
					drawWorld();
					$("img.pacman").attr("src","img/pacman_down.png")
				}
			}

		})



	</script>
</body>
</html>